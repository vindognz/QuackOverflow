<!--
  ===================    !!READ THIS NOTICE!!   ====================
  DO NOT edit this file manually. Your changes WILL BE OVERWRITTEN!
  This journal is auto generated and updated by Hack Club Blueprint.
  To edit this file, please edit your journal entries on Blueprint.
  ==================================================================
-->

This is my journal of the design and building process of **QuackOverflow**.  
You can view this journal in more detail on **Hack Club Blueprint** [here](https://blueprint.hackclub.com/projects/535).


## 10/16/2025 - The plan: Architecture and Initial design decisions.  

### Initial Concept:
The goal is to take a $2 Kmart rubber duck and turn it into a wirelessly charged debugging companion that glows. No USB ports, no external wires - just a duck that sits on his charging lilypad and glows when you need him.

### Important Design Decisions:
**Why wireless charging?** Nobody wants to plug a cable into their duck, its restricting and incredibly awkward. Qi wireless charging means the duck can sit on a decorated base and charge passively when he isn't needed. Clean and simple.

**Why ESP32-C3?** Overkill for simple LED control, but leaves the door open for future features (WiFi control, IDE integration, etc.). For now however, it will just run the LEDs, but the capability is there if I choose to expand later.

**5 LEDs**: With my duck only having ≈200mL internal volume, space is tight. Five WS2812B addressable LEDs provides enough glow without draining the battery too fast.

### Power Management (sleep states)
* **On charging pad:** Duck detects incoming Qi power and enters sleep mode (all LEDs off, low power draw.)
* **Picked up:** Charging stops, duck wakes up, LEDs turn on.
* **Low battery:** Red flashing warning, signals its time for a nap.
No physical on/off switches, just pick him up to activate.

### Power Flow:
* Qi receiver provides ≈5V to TP4056 charging module
* TP4056 manages LiPo charging and protection
* Battery outputs 3.7V to ESP32-C3
* ESP32 drives WS2812B LEDs (data pin + power)

**Detection Logic:** ESP32 monitors the TP4056's charging status pin to detect when the duck is on the pad.

### Rough measurements:
Thanks to rigorous scientific testing (shoutout to Mum for dunking the duck in a measuring jug while I was at school), we know:

* External volume: ≈300mL
* Estimated internal volume: ≈200mL (accounting for 2-3mL PVC walls)
This should give us just enough space for a flat LiPo (500-800mAh range), the PCB, and components.

### Next Steps:
1. **Component selection:** Find specific numbers for ESP32-C3, LEDs, battery, Qi coils, etc.
2. **Schematic design:** Map out the full circuit in Kicad
3. **PCB Layout:** Design the board to fit the ducks base (≈8cm diameter)
4. **3D model charging base:** "DEBUGGING IN PROCESS" stand design in FreeCad.

![quackoverflowsystemarchi.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjQwNCwicHVyIjoiYmxvYl9pZCJ9fQ==--5ae0a494c3c1d1885d311b5ed88798e7d1a9d288/quackoverflowsystemarchi.png)
  

## 10/18/2025 8 AM - Schematic Completed.  

### Progress:
Finished the full circuit schematic in KiCad today. All major components are connected and ready for PCB design!

### Final component choices:
* **ESP32-C3-Mini-1** - main microcontroller
* **5x WS2812B LEDs** - daisy-chained addressable RGB
* **TP4056-42-ESOP8** - LiPo charging IC
* **Qi reciever module** - Wireless power input
* **LiPo battery** - 500-800mAh (exact model TBD)

### Key design features:
* 330Ω resistor on LED data line for signal protection
* 100nF decoupling caps near ESP32 and LED chain
* CHRG pin from TP4056 connected to GPIO9 for charge detection
* EN pin pulled high via 10kΩ resistor

### PCB Design Strategy (Vertical layout):

* Battery sits on the 2cm floor
* PCB mounts on top of battery (~2cm above floor)
* At this height, the duck body is ~9cm x 8.5cm oval
* PCB will be an oval shape (~8cm x 7cm) to fit with clearance

### Next up:
1. Assign footprints to all the schematic components.
2. Design the PCB shape to fit the duck.
3. Place components.
4. Route traces.
5. Start working on 3D models!

![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjcyMCwicHVyIjoiYmxvYl9pZCJ9fQ==--e6df71838b788e4c8031d42606030debc354116a/image.png)
  

## 10/18/2025 10 AM - PCB Layout Completed!  

### Board Design:
Finished the PCB layout. 8cm diameter circular board to fit inside the duck body at battery height.

### Component placement strategy:
* **Center:** ESP32-C3-MINI-1 with 'Antenna Area' kept clear.
* **Around ESP32:** TP4056 charging module, decoupling caps, resistors and battery cell
* **Ring formation:** 5 LEDs arranged around the perimeter

### LED Arrangement:
Originally planned to have LEDs evenly distributed around the circle, but pivoted to:
* **Top head area:** 1 LED (D2)
* **Front left/right:** 2 LEDs (D1, D3)
* **Back left/right:** 2 LEDs (D4, D5)
This should create a more even lighting effect, and ensure the head is well lit.

### Routing challenges:
The main challenge was minimizing the length of tracks in the LED daisy chain, since data must flow in order (GPIO8 -> D1 -> D2 -> D3 -> D4 -> D5). My solution was to segment into two zones - the top 3 LEDs and the bottom 2. This allowed me to minimize the number of long tracks by creating one positive, ground and data line, then hijacking the positive and GND from the charging module. This left only one really long track, connecting D3 and D4.

Power distribution was straightforward, just connecting VBAT and GND to each component and placing two decoupling caps near the ESP32 as good practice.

### Next Steps:
1. Export Gerber files for PCB fabrication
2. Create a BOM
3. 3D model stand
4. Write firmware for ESP32

![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6Mjc1NywicHVyIjoiYmxvYl9pZCJ9fQ==--03886637dca32c8294ab8876c87e079ba7a4c186/image.png)  

